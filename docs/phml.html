<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 12.2.0"/>
    <title>phml API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>


        <h2>Submodules</h2>
        <ul>
                <li><a href="phml/core.html">core</a></li>
                <li><a href="phml/nodes.html">nodes</a></li>
                <li><a href="phml/utils.html">utils</a></li>
                <li><a href="phml/virtual_python.html">virtual_python</a></li>
                <li><a href="phml/builder.html">builder</a></li>
        </ul>

        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#Compiler">Compiler</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Compiler.__init__">Compiler</a>
                        </li>
                        <li>
                                <a class="variable" href="#Compiler.ast">ast</a>
                        </li>
                        <li>
                                <a class="function" href="#Compiler.add">add</a>
                        </li>
                        <li>
                                <a class="function" href="#Compiler.remove">remove</a>
                        </li>
                        <li>
                                <a class="function" href="#Compiler.compile">compile</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Parser">Parser</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Parser.__init__">Parser</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parser.parser">parser</a>
                        </li>
                        <li>
                                <a class="variable" href="#Parser.ast">ast</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.load">load</a>
                        </li>
                        <li>
                                <a class="function" href="#Parser.parse">parse</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AST">AST</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AST.__init__">AST</a>
                        </li>
                        <li>
                                <a class="variable" href="#AST.size">size</a>
                        </li>
                        <li>
                                <a class="variable" href="#AST.children">children</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
phml    </h1>

                        <div class="docstring"><p>Python Hypertext Markup Language (phml)</p>

<p>The idea behind phml is to replicate the functionality of some javascript
frameworks like ReactJS, VueJS, AstroJS, etc... All of these frameworks
allow the user to inject javascript in some way. Most of the time you can
inject javascript data into html using brackets. A lot of the frameworks also
have custom attributes on elements for conditional rendering.</p>

<p>phml strives to do similar things, However, the nuance here
is that phml uses python. There is a new html element that is reserved for phml.
This element is the <code>&lt;python&gt;</code> element. It means to replicate the purpose of the
<code>&lt;script&gt;</code> element. On top of this there are smaller blocks that use brackets
that expect the expression to return some sort of value. Finally, there are custom
attributes. <code>py-if</code>, <code>py-elif</code>, and <code>py-else</code> are reserved for conditional rendering.
All attributes prefixed with <code>py-</code> will have their value evaluated as python. More details
on each of these topics is described below.</p>

<p>Let's start with the new <code>python</code> element. Python is a whitespace language. As such phml
has the challenge of maintaining the indentation in a appropriate way. With this in phml,
you can have as much leading whitespace as you want as long as the indentation is consistent.
This means that indentation is based of the first lines offset. Take this phml example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&lt;</span><span class="n">python</span><span class="o">&gt;</span>
    <span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="o">&lt;/</span><span class="n">python</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>This phml python block will adjust the offset so that the python is processed as this:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</code></pre>
</div>

<p>So now we can write python code, now what? You can define functions and variables
how you normally would and they are now available to the scope of the entire file.
Take, for instance, the example from above, the one with <code>py-src="urls('youtube')"</code>.
You can define the URLs function in the <code>python</code> element and it can be accessed in the <code>py-src</code>
attribute. So the code would look like this:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="p">&lt;</span><span class="nt">python</span><span class="p">&gt;</span>
def urls(link: str) -&gt; str:
    links = {
        &quot;youtube&quot;: &quot;https://youtube.com&quot;
    }
    if link in links:
        return links[link]
    else:
        return &quot;&quot;
<span class="p">&lt;/</span><span class="nt">python</span><span class="p">&gt;</span>

...

<span class="p">&lt;</span><span class="nt">a</span> <span class="na">py-href</span><span class="o">=</span><span class="s">&quot;urls(&#39;youtube&#39;)&quot;</span><span class="p">&gt;</span>Youtube<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</code></pre>
</div>

<p>phml treats <code>python</code> elements as their own python files. This is meant literally.
phml creates a temporary python file with a unique name and imports everything from that file.
With that in mind that means you have the full power of whatever version of python you are using.
The phml parser has functionality to permanently write these python files out if you so desire.</p>

<p>Next up is inline python blocks. These are represented with <code>{}</code>. Any text with this block or
normal html attribute with the value containing it will process the text in-between the brackets as
python. This is mostly useful when you want to inject some python processed or stored value
into html. Assume that there is a variable defined in the <code>python</code> element called <code>message</code>
and it contains <code>Hello World!</code>. Now this variable can be used like this, <code>&lt;p&gt;{ message }&lt;/p&gt;</code>,
which renders to, <code>&lt;p&gt;Hello World!&lt;/p&gt;</code>. Inline python blocks are only rendered in inside a Text
element or inside an html attribute.</p>

<p>Now multiline blocks are a lot like inline python blocks, but they also have soem differences.
They are not one line single python expressions, but full multiline python source code.
You can do whatever you like inside this block, however if you expect a value to come from
a multiline block it comes from the last local. So if you have a variable or function as the
last local; it will be used as the compiled result that replaces the python block.</p>

<p>Conditional Rendering with <code>py-if</code>, <code>py-elif</code>, and <code>py-else</code> is an extremely helpful tool in phml.
<code>py-if</code> can be used alone and that the python inside it's value must be truthy for the element to be
rendered. <code>py-elif</code> requires an element with a <code>py-if</code> or <code>py-elif</code> attribute immediately before it,
and it's condition is rendered the same as <code>py-if</code> but only rendered if a <code>py-if</code> or <code>py-elif</code> first
fails. <code>py-else</code> requires there to be either a <code>py-if</code> or a <code>py-else</code> immediately before it. It only
renders if the previous elements condition fails. If <code>py-elif</code> or <code>py-else</code> is on an element, but
the previous element isn't a <code>py-if</code> or <code>py-elif</code> then it will be rendered as normal without the
condition. Most importantly, the first element in a chain of conditions must be a <code>py-if</code>.</p>

<p>Other than conditions, there is also a built it py-for attribute. Techinally you can do a multiline
python block or use a python element to create a html string based on a list. However, for ease
of use phml provides phml. Any element with py-for will take a python for-loop expression that
will be applied to that element. So if you did something like this:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span> <span class="na">py-for</span><span class="o">=</span><span class="s">&#39;for i in range(3)&#39;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>{i}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre>
</div>

<p>The compiled html will be:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>2<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>3<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</code></pre>
</div>

<p>Python attributes are shortcuts for using inline python blocks in html attributes. Normally, in
phml, you would inject python logic into an attribute similar to this: <code>src="{url('youtube')}"</code>.
As a way to simplify the value and to make it obvious that the attribute is using python you can
prefix any attribute with <code>py-</code>. This keeps the attribute name the same after the prefix, but tells
the parser that the entire value should be processed as python. So the previous example can also be
expressed as <code>py-src="url('youtube')"</code>.</p>

<p>PHML as a language is in early planning stages, but hopes to have a easy to use and well featured
parser. With this the hope is that anyone using the parser will have full control over the generated
phml ast. This also means that users may write extensions to add features to to manipulate the ast
to fit their needs. On top of all that the parser will also have a render/convert functionality
where the user may pass extensions, and additional kwargs. These kwargs are exposed while rendering
the file to html. This means that the user can generate some other content from some other source
and inject it into their document. A good example of this is using the <code>markdown</code> python library
to render markdown to html, then to inject that into the renderer by passing it in as a kwarg.</p>
</div>

                        <input id="mod-phml-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-phml-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;Python Hypertext Markup Language (phml)</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">The idea behind phml is to replicate the functionality of some javascript</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">frameworks like ReactJS, VueJS, AstroJS, etc... All of these frameworks</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">allow the user to inject javascript in some way. Most of the time you can</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">inject javascript data into html using brackets. A lot of the frameworks also</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">have custom attributes on elements for conditional rendering.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">phml strives to do similar things, However, the nuance here</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">is that phml uses python. There is a new html element that is reserved for phml.</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">This element is the `&lt;python&gt;` element. It means to replicate the purpose of the</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">`&lt;script&gt;` element. On top of this there are smaller blocks that use brackets</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">that expect the expression to return some sort of value. Finally, there are custom</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">attributes. `py-if`, `py-elif`, and `py-else` are reserved for conditional rendering.</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">All attributes prefixed with `py-` will have their value evaluated as python. More details</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">on each of these topics is described below.</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">Let&#39;s start with the new `python` element. Python is a whitespace language. As such phml</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">has the challenge of maintaining the indentation in a appropriate way. With this in phml,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">you can have as much leading whitespace as you want as long as the indentation is consistent.</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">This means that indentation is based of the first lines offset. Take this phml example:</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">```python</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">&lt;python&gt;</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">    if True:</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">        print(&quot;Hello World&quot;)</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">&lt;/python&gt;</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">```</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">This phml python block will adjust the offset so that the python is processed as this:</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">```python</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">if True:</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">    print(&quot;Hello World&quot;)</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">```</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">So now we can write python code, now what? You can define functions and variables</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">how you normally would and they are now available to the scope of the entire file.</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">Take, for instance, the example from above, the one with `py-src=&quot;urls(&#39;youtube&#39;)&quot;`.</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">You can define the URLs function in the `python` element and it can be accessed in the `py-src`</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">attribute. So the code would look like this:</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">```html</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">&lt;python&gt;</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">def urls(link: str) -&gt; str:</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">    links = {</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">        &quot;youtube&quot;: &quot;https://youtube.com&quot;</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">    }</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">    if link in links:</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">        return links[link]</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">    else:</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">        return &quot;&quot;</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">&lt;/python&gt;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">...</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">&lt;a py-href=&quot;urls(&#39;youtube&#39;)&quot;&gt;Youtube&lt;/a&gt;</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">```</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">phml treats `python` elements as their own python files. This is meant literally.</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">phml creates a temporary python file with a unique name and imports everything from that file.</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">With that in mind that means you have the full power of whatever version of python you are using.</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">The phml parser has functionality to permanently write these python files out if you so desire.</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">Next up is inline python blocks. These are represented with `{}`. Any text with this block or</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">normal html attribute with the value containing it will process the text in-between the brackets as</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">python. This is mostly useful when you want to inject some python processed or stored value</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">into html. Assume that there is a variable defined in the `python` element called `message`</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">and it contains `Hello World!`. Now this variable can be used like this, `&lt;p&gt;{ message }&lt;/p&gt;`,</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">which renders to, `&lt;p&gt;Hello World!&lt;/p&gt;`. Inline python blocks are only rendered in inside a Text</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">element or inside an html attribute.</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">Now multiline blocks are a lot like inline python blocks, but they also have soem differences.</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">They are not one line single python expressions, but full multiline python source code.</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">You can do whatever you like inside this block, however if you expect a value to come from</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">a multiline block it comes from the last local. So if you have a variable or function as the</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">last local; it will be used as the compiled result that replaces the python block.</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">Conditional Rendering with `py-if`, `py-elif`, and `py-else` is an extremely helpful tool in phml.</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">`py-if` can be used alone and that the python inside it&#39;s value must be truthy for the element to be</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">rendered. `py-elif` requires an element with a `py-if` or `py-elif` attribute immediately before it,</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">and it&#39;s condition is rendered the same as `py-if` but only rendered if a `py-if` or `py-elif` first</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">fails. `py-else` requires there to be either a `py-if` or a `py-else` immediately before it. It only</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">renders if the previous elements condition fails. If `py-elif` or `py-else` is on an element, but</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">the previous element isn&#39;t a `py-if` or `py-elif` then it will be rendered as normal without the</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">condition. Most importantly, the first element in a chain of conditions must be a `py-if`.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">Other than conditions, there is also a built it py-for attribute. Techinally you can do a multiline</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">python block or use a python element to create a html string based on a list. However, for ease</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">of use phml provides phml. Any element with py-for will take a python for-loop expression that</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">will be applied to that element. So if you did something like this:</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">```html</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">&lt;ul&gt;</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">    &lt;li py-for=&#39;for i in range(3)&#39;&gt;</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">        &lt;p&gt;{i}&lt;/p&gt;</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">    &lt;/li&gt;</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">&lt;/ul&gt;</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">```</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">The compiled html will be:</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">```html</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">&lt;ul&gt;</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">    &lt;li&gt;</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">        &lt;p&gt;1&lt;/p&gt;</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">    &lt;/li&gt;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">    &lt;li&gt;</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">        &lt;p&gt;2&lt;/p&gt;</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">    &lt;/li&gt;</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">    &lt;li&gt;</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">        &lt;p&gt;3&lt;/p&gt;</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">    &lt;/li&gt;</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">&lt;/ul&gt;</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">```</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">Python attributes are shortcuts for using inline python blocks in html attributes. Normally, in</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">phml, you would inject python logic into an attribute similar to this: `src=&quot;{url(&#39;youtube&#39;)}&quot;`.</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">As a way to simplify the value and to make it obvious that the attribute is using python you can</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">prefix any attribute with `py-`. This keeps the attribute name the same after the prefix, but tells</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">the parser that the entire value should be processed as python. So the previous example can also be</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">expressed as `py-src=&quot;url(&#39;youtube&#39;)&quot;`.</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">PHML as a language is in early planning stages, but hopes to have a easy to use and well featured</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">parser. With this the hope is that anyone using the parser will have full control over the generated</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">phml ast. This also means that users may write extensions to add features to to manipulate the ast</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">to fit their needs. On top of all that the parser will also have a render/convert functionality</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">where the user may pass extensions, and additional kwargs. These kwargs are exposed while rendering</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">the file to html. This means that the user can generate some other content from some other source</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">and inject it into their document. A good example of this is using the `markdown` python library</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">to render markdown to html, then to inject that into the renderer by passing it in as a kwarg.</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">builder</span><span class="p">,</span> <span class="n">core</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">utils</span><span class="p">,</span> <span class="n">virtual_python</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="kn">from</span> <span class="nn">.core</span> <span class="kn">import</span> <span class="n">Compiler</span><span class="p">,</span> <span class="n">Parser</span><span class="p">,</span> <span class="n">file_types</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a><span class="kn">from</span> <span class="nn">.nodes</span> <span class="kn">import</span> <span class="n">AST</span><span class="p">,</span> <span class="n">All_Nodes</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.1.0&quot;</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>    <span class="s2">&quot;Compiler&quot;</span><span class="p">,</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>    <span class="s2">&quot;Parser&quot;</span><span class="p">,</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>    <span class="s2">&quot;file_types&quot;</span><span class="p">,</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>    <span class="s2">&quot;AST&quot;</span><span class="p">,</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>    <span class="s2">&quot;core&quot;</span><span class="p">,</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>    <span class="s2">&quot;nodes&quot;</span><span class="p">,</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>    <span class="s2">&quot;utils&quot;</span><span class="p">,</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>    <span class="s2">&quot;virtual_python&quot;</span><span class="p">,</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>    <span class="s2">&quot;file_types&quot;</span><span class="p">,</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>    <span class="s2">&quot;builder&quot;</span><span class="p">,</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="p">]</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="k">class</span> <span class="nc">PHMLCore</span><span class="p">:</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>    <span class="sd">&quot;&quot;&quot;A helper class that bundles the functionality</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">    of the parser and compiler together. Allows for loading source files,</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">    parsing strings and dicts, rendering to a different format, and finally</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">    writing the results of a render to a file.</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>    <span class="n">parser</span><span class="p">:</span> <span class="n">Parser</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>    <span class="sd">&quot;&quot;&quot;Instance of a [Parser][phml.parser.Parser].&quot;&quot;&quot;</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>    <span class="n">compiler</span><span class="p">:</span> <span class="n">Compiler</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>    <span class="sd">&quot;&quot;&quot;Instance of a [Compiler][phml.compile.Compiler].&quot;&quot;&quot;</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>    <span class="nd">@property</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>    <span class="k">def</span> <span class="nf">ast</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AST</span><span class="p">:</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">ast</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>    <span class="nd">@ast</span><span class="o">.</span><span class="n">setter</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>    <span class="k">def</span> <span class="nf">ast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_ast</span><span class="p">:</span> <span class="n">AST</span><span class="p">):</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">_ast</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>        <span class="n">components</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>    <span class="p">):</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compiler</span> <span class="o">=</span> <span class="n">Compiler</span><span class="p">(</span><span class="n">components</span><span class="o">=</span><span class="n">components</span><span class="p">)</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>        <span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]</span> <span class="o">|</span> <span class="n">AST</span><span class="p">]</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]</span> <span class="o">|</span> <span class="n">AST</span><span class="p">]</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>        <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>    <span class="p">):</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>        <span class="sd">&quot;&quot;&quot;Add a component to the element replacement list.</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        Components passed in can be of a few types. The first type it can be is a</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        pathlib.Path type. This will allow for automatic parsing of the file at the</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">        path and then the filename and parsed ast are passed to the compiler. It can</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        also be a dictionary of str being the name of the element to be replaced.</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        The name can be snake case, camel case, or pascal cased. The value can either</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        be the parsed result of the component from phml.utils.parse_component() or the</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        parsed ast of the component. Lastely, the component can be a tuple. The first</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        value is the name of the element to be replaced; with the second value being</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">        either the parsed result of the component or the component&#39;s ast.</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        Note:</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">            Any duplicate components will be replaced.</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">        Args:</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">            components: Any number values indicating</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">            name of the component and the the component. The name is used</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">            to replace a element with the tag==name.</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>        <span class="kn">from</span> <span class="nn">phml.utils</span> <span class="kn">import</span> <span class="n">filename_from_path</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">filename_from_path</span><span class="p">(</span><span class="n">component</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">ast</span><span class="p">))</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">):</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>        <span class="sd">&quot;&quot;&quot;Remove an element from the list of element replacements.</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">        Takes any number of strings or node objects. If a string is passed</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">        it is used as the key that will be removed. If a node object is passed</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">        it will attempt to find a matching node and remove it.</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="o">*</span><span class="n">components</span><span class="p">)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">):</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>        <span class="sd">&quot;&quot;&quot;Load a source files data and parse it to phml.</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">        Args:</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">            path (str | Path): The path to the source file.</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>        <span class="sd">&quot;&quot;&quot;Parse a str or dict object into phml.</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">        Args:</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">            data (str | dict): Object to parse to phml</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">file_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_types</span><span class="o">.</span><span class="n">HTML</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="sd">&quot;&quot;&quot;Render the parsed ast to a different format. Defaults to rendering to html.</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="sd">        Args:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">            file_type (str): The format to render to. Currently support html, phml, and json.</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="sd">            indent (Optional[int], optional): The number of spaces per indent. By default it will</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">            use the standard for the given format. HTML has 4 spaces, phml has 4 spaces, and json</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">            has 2 spaces.</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">        Returns:</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">            str: The rendered content in the appropriate format.</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compiler</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">ast</span><span class="p">,</span> <span class="n">file_type</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>        <span class="n">dest</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>        <span class="n">file_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">file_types</span><span class="o">.</span><span class="n">HTML</span><span class="p">,</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>        <span class="n">indent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>    <span class="p">):</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>        <span class="sd">&quot;&quot;&quot;Renders the parsed ast to a different format, then writes</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">        it to a given file. Defaults to rendering and writing out as html.</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="sd">        Args:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">            dest (str | Path): The path to the file to be written to.</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">            file_type (str): The format to render the ast as.</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">            indent (Optional[int], optional): The number of spaces per indent. By default it will</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">            use the standard for the given format. HTML has 4 spaces, phml has 4 spaces, and json</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="sd">            has 2 spaces.</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="sd">            kwargs: Any additional data to pass to the compiler that will be exposed to the</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="sd">            phml files.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="s2">&quot;+w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dest_file</span><span class="p">:</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>            <span class="n">dest_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">file_type</span><span class="o">=</span><span class="n">file_type</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            </section>
                <section id="Compiler">
                            <input id="Compiler-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Compiler</span>:

                <label class="view-source-button" for="Compiler-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Compiler"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Compiler-28"><a href="#Compiler-28"><span class="linenos"> 28</span></a><span class="k">class</span> <span class="nc">Compiler</span><span class="p">:</span>
</span><span id="Compiler-29"><a href="#Compiler-29"><span class="linenos"> 29</span></a>    <span class="sd">&quot;&quot;&quot;Used to compile phml into other formats. HTML, PHML,</span>
</span><span id="Compiler-30"><a href="#Compiler-30"><span class="linenos"> 30</span></a><span class="sd">    JSON, Markdown, etc...</span>
</span><span id="Compiler-31"><a href="#Compiler-31"><span class="linenos"> 31</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Compiler-32"><a href="#Compiler-32"><span class="linenos"> 32</span></a>
</span><span id="Compiler-33"><a href="#Compiler-33"><span class="linenos"> 33</span></a>    <span class="n">ast</span><span class="p">:</span> <span class="n">AST</span>
</span><span id="Compiler-34"><a href="#Compiler-34"><span class="linenos"> 34</span></a>    <span class="sd">&quot;&quot;&quot;phml ast used by the compiler to generate a new format.&quot;&quot;&quot;</span>
</span><span id="Compiler-35"><a href="#Compiler-35"><span class="linenos"> 35</span></a>
</span><span id="Compiler-36"><a href="#Compiler-36"><span class="linenos"> 36</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Compiler-37"><a href="#Compiler-37"><span class="linenos"> 37</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Compiler-38"><a href="#Compiler-38"><span class="linenos"> 38</span></a>        <span class="n">ast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AST</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler-39"><a href="#Compiler-39"><span class="linenos"> 39</span></a>        <span class="n">components</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler-40"><a href="#Compiler-40"><span class="linenos"> 40</span></a>    <span class="p">):</span>
</span><span id="Compiler-41"><a href="#Compiler-41"><span class="linenos"> 41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">ast</span>
</span><span id="Compiler-42"><a href="#Compiler-42"><span class="linenos"> 42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">components</span> <span class="o">=</span> <span class="n">components</span> <span class="ow">or</span> <span class="p">{}</span>
</span><span id="Compiler-43"><a href="#Compiler-43"><span class="linenos"> 43</span></a>
</span><span id="Compiler-44"><a href="#Compiler-44"><span class="linenos"> 44</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
</span><span id="Compiler-45"><a href="#Compiler-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Compiler-46"><a href="#Compiler-46"><span class="linenos"> 46</span></a>        <span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]</span> <span class="o">|</span> <span class="n">AST</span><span class="p">]</span>
</span><span id="Compiler-47"><a href="#Compiler-47"><span class="linenos"> 47</span></a>        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]</span> <span class="o">|</span> <span class="n">AST</span><span class="p">],</span>
</span><span id="Compiler-48"><a href="#Compiler-48"><span class="linenos"> 48</span></a>    <span class="p">):</span>
</span><span id="Compiler-49"><a href="#Compiler-49"><span class="linenos"> 49</span></a>        <span class="sd">&quot;&quot;&quot;Add a component to the compilers component list.</span>
</span><span id="Compiler-50"><a href="#Compiler-50"><span class="linenos"> 50</span></a>
</span><span id="Compiler-51"><a href="#Compiler-51"><span class="linenos"> 51</span></a><span class="sd">        Components passed in can be of a few types. It can also be a dictionary of str</span>
</span><span id="Compiler-52"><a href="#Compiler-52"><span class="linenos"> 52</span></a><span class="sd">        being the name of the element to be replaced. The name can be snake case, camel</span>
</span><span id="Compiler-53"><a href="#Compiler-53"><span class="linenos"> 53</span></a><span class="sd">        case, or pascal cased. The value can either be the parsed result of the component</span>
</span><span id="Compiler-54"><a href="#Compiler-54"><span class="linenos"> 54</span></a><span class="sd">        from phml.utils.parse_component() or the parsed ast of the component. Lastely,</span>
</span><span id="Compiler-55"><a href="#Compiler-55"><span class="linenos"> 55</span></a><span class="sd">        the component can be a tuple. The first value is the name of the element to be</span>
</span><span id="Compiler-56"><a href="#Compiler-56"><span class="linenos"> 56</span></a><span class="sd">        replaced; with the second value being either the parsed result of the component</span>
</span><span id="Compiler-57"><a href="#Compiler-57"><span class="linenos"> 57</span></a><span class="sd">        or the component&#39;s ast.</span>
</span><span id="Compiler-58"><a href="#Compiler-58"><span class="linenos"> 58</span></a>
</span><span id="Compiler-59"><a href="#Compiler-59"><span class="linenos"> 59</span></a><span class="sd">        Note:</span>
</span><span id="Compiler-60"><a href="#Compiler-60"><span class="linenos"> 60</span></a><span class="sd">            Any duplicate components will be replaced.</span>
</span><span id="Compiler-61"><a href="#Compiler-61"><span class="linenos"> 61</span></a>
</span><span id="Compiler-62"><a href="#Compiler-62"><span class="linenos"> 62</span></a><span class="sd">        Args:</span>
</span><span id="Compiler-63"><a href="#Compiler-63"><span class="linenos"> 63</span></a><span class="sd">            components: Any number values indicating</span>
</span><span id="Compiler-64"><a href="#Compiler-64"><span class="linenos"> 64</span></a><span class="sd">            name of the component and the the component. The name is used</span>
</span><span id="Compiler-65"><a href="#Compiler-65"><span class="linenos"> 65</span></a><span class="sd">            to replace a element with the tag==name.</span>
</span><span id="Compiler-66"><a href="#Compiler-66"><span class="linenos"> 66</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Compiler-67"><a href="#Compiler-67"><span class="linenos"> 67</span></a>
</span><span id="Compiler-68"><a href="#Compiler-68"><span class="linenos"> 68</span></a>        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
</span><span id="Compiler-69"><a href="#Compiler-69"><span class="linenos"> 69</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Compiler-70"><a href="#Compiler-70"><span class="linenos"> 70</span></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Compiler-71"><a href="#Compiler-71"><span class="linenos"> 71</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">AST</span><span class="p">):</span>
</span><span id="Compiler-72"><a href="#Compiler-72"><span class="linenos"> 72</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">parse_component</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="Compiler-73"><a href="#Compiler-73"><span class="linenos"> 73</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-74"><a href="#Compiler-74"><span class="linenos"> 74</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Compiler-75"><a href="#Compiler-75"><span class="linenos"> 75</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
</span><span id="Compiler-76"><a href="#Compiler-76"><span class="linenos"> 76</span></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">AST</span><span class="p">):</span>
</span><span id="Compiler-77"><a href="#Compiler-77"><span class="linenos"> 77</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">parse_component</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="Compiler-78"><a href="#Compiler-78"><span class="linenos"> 78</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-79"><a href="#Compiler-79"><span class="linenos"> 79</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">component</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Compiler-80"><a href="#Compiler-80"><span class="linenos"> 80</span></a>
</span><span id="Compiler-81"><a href="#Compiler-81"><span class="linenos"> 81</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Compiler-82"><a href="#Compiler-82"><span class="linenos"> 82</span></a>
</span><span id="Compiler-83"><a href="#Compiler-83"><span class="linenos"> 83</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">):</span>
</span><span id="Compiler-84"><a href="#Compiler-84"><span class="linenos"> 84</span></a>        <span class="sd">&quot;&quot;&quot;Takes either component names or components and removes them</span>
</span><span id="Compiler-85"><a href="#Compiler-85"><span class="linenos"> 85</span></a><span class="sd">        from the dictionary.</span>
</span><span id="Compiler-86"><a href="#Compiler-86"><span class="linenos"> 86</span></a>
</span><span id="Compiler-87"><a href="#Compiler-87"><span class="linenos"> 87</span></a><span class="sd">        Args:</span>
</span><span id="Compiler-88"><a href="#Compiler-88"><span class="linenos"> 88</span></a><span class="sd">            components (str | All_Nodes): Any str name of components or</span>
</span><span id="Compiler-89"><a href="#Compiler-89"><span class="linenos"> 89</span></a><span class="sd">            node value to remove from the components list in the compiler.</span>
</span><span id="Compiler-90"><a href="#Compiler-90"><span class="linenos"> 90</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Compiler-91"><a href="#Compiler-91"><span class="linenos"> 91</span></a>        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
</span><span id="Compiler-92"><a href="#Compiler-92"><span class="linenos"> 92</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Compiler-93"><a href="#Compiler-93"><span class="linenos"> 93</span></a>                <span class="k">if</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
</span><span id="Compiler-94"><a href="#Compiler-94"><span class="linenos"> 94</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Compiler-95"><a href="#Compiler-95"><span class="linenos"> 95</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-96"><a href="#Compiler-96"><span class="linenos"> 96</span></a>                    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid component name </span><span class="si">{</span><span class="n">component</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Compiler-97"><a href="#Compiler-97"><span class="linenos"> 97</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">All_Nodes</span><span class="p">):</span>
</span><span id="Compiler-98"><a href="#Compiler-98"><span class="linenos"> 98</span></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
</span><span id="Compiler-99"><a href="#Compiler-99"><span class="linenos"> 99</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">component</span><span class="p">:</span>
</span><span id="Compiler-100"><a href="#Compiler-100"><span class="linenos">100</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Compiler-101"><a href="#Compiler-101"><span class="linenos">101</span></a>                        <span class="k">break</span>
</span><span id="Compiler-102"><a href="#Compiler-102"><span class="linenos">102</span></a>                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">components</span><span class="p">:</span>
</span><span id="Compiler-103"><a href="#Compiler-103"><span class="linenos">103</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Compiler-104"><a href="#Compiler-104"><span class="linenos">104</span></a>                        <span class="k">break</span>
</span><span id="Compiler-105"><a href="#Compiler-105"><span class="linenos">105</span></a>
</span><span id="Compiler-106"><a href="#Compiler-106"><span class="linenos">106</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Compiler-107"><a href="#Compiler-107"><span class="linenos">107</span></a>
</span><span id="Compiler-108"><a href="#Compiler-108"><span class="linenos">108</span></a>    <span class="k">def</span> <span class="nf">compile</span><span class="p">(</span>
</span><span id="Compiler-109"><a href="#Compiler-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Compiler-110"><a href="#Compiler-110"><span class="linenos">110</span></a>        <span class="n">ast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AST</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler-111"><a href="#Compiler-111"><span class="linenos">111</span></a>        <span class="n">to_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">,</span>
</span><span id="Compiler-112"><a href="#Compiler-112"><span class="linenos">112</span></a>        <span class="n">indent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler-113"><a href="#Compiler-113"><span class="linenos">113</span></a>        <span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler-114"><a href="#Compiler-114"><span class="linenos">114</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="Compiler-115"><a href="#Compiler-115"><span class="linenos">115</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Compiler-116"><a href="#Compiler-116"><span class="linenos">116</span></a>        <span class="sd">&quot;&quot;&quot;Execute compilation to a different format.&quot;&quot;&quot;</span>
</span><span id="Compiler-117"><a href="#Compiler-117"><span class="linenos">117</span></a>
</span><span id="Compiler-118"><a href="#Compiler-118"><span class="linenos">118</span></a>        <span class="n">ast</span> <span class="o">=</span> <span class="n">ast</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ast</span>
</span><span id="Compiler-119"><a href="#Compiler-119"><span class="linenos">119</span></a>
</span><span id="Compiler-120"><a href="#Compiler-120"><span class="linenos">120</span></a>        <span class="k">if</span> <span class="n">ast</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Compiler-121"><a href="#Compiler-121"><span class="linenos">121</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Must provide an ast to compile.&quot;</span><span class="p">)</span>
</span><span id="Compiler-122"><a href="#Compiler-122"><span class="linenos">122</span></a>
</span><span id="Compiler-123"><a href="#Compiler-123"><span class="linenos">123</span></a>        <span class="n">doctypes</span> <span class="o">=</span> <span class="p">[</span><span class="n">dt</span> <span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="n">visit_children</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span> <span class="k">if</span> <span class="n">test</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="s2">&quot;doctype&quot;</span><span class="p">)]</span>
</span><span id="Compiler-124"><a href="#Compiler-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">doctypes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Compiler-125"><a href="#Compiler-125"><span class="linenos">125</span></a>            <span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">DocType</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="p">))</span>
</span><span id="Compiler-126"><a href="#Compiler-126"><span class="linenos">126</span></a>
</span><span id="Compiler-127"><a href="#Compiler-127"><span class="linenos">127</span></a>        <span class="k">if</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">PHML</span><span class="p">:</span>
</span><span id="Compiler-128"><a href="#Compiler-128"><span class="linenos">128</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__phml</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span> <span class="ow">or</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="Compiler-129"><a href="#Compiler-129"><span class="linenos">129</span></a>        <span class="k">elif</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">HTML</span><span class="p">:</span>
</span><span id="Compiler-130"><a href="#Compiler-130"><span class="linenos">130</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__html</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span> <span class="ow">or</span> <span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Compiler-131"><a href="#Compiler-131"><span class="linenos">131</span></a>        <span class="k">elif</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">JSON</span><span class="p">:</span>
</span><span id="Compiler-132"><a href="#Compiler-132"><span class="linenos">132</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__json</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span> <span class="ow">or</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="Compiler-133"><a href="#Compiler-133"><span class="linenos">133</span></a>        <span class="k">elif</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">Markdown</span><span class="p">:</span>
</span><span id="Compiler-134"><a href="#Compiler-134"><span class="linenos">134</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__markdown</span><span class="p">(</span><span class="n">ast</span><span class="p">)</span>
</span><span id="Compiler-135"><a href="#Compiler-135"><span class="linenos">135</span></a>        <span class="k">elif</span> <span class="n">handler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Compiler-136"><a href="#Compiler-136"><span class="linenos">136</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unkown format &lt; </span><span class="si">{</span> <span class="n">to_format</span> <span class="si">}</span><span class="s2"> &gt;&quot;</span><span class="p">)</span>
</span><span id="Compiler-137"><a href="#Compiler-137"><span class="linenos">137</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-138"><a href="#Compiler-138"><span class="linenos">138</span></a>            <span class="k">return</span> <span class="n">handler</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span>
</span><span id="Compiler-139"><a href="#Compiler-139"><span class="linenos">139</span></a>
</span><span id="Compiler-140"><a href="#Compiler-140"><span class="linenos">140</span></a>    <span class="k">def</span> <span class="nf">__phml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ast</span><span class="p">:</span> <span class="n">AST</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Compiler-141"><a href="#Compiler-141"><span class="linenos">141</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__to_html</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span>
</span><span id="Compiler-142"><a href="#Compiler-142"><span class="linenos">142</span></a>
</span><span id="Compiler-143"><a href="#Compiler-143"><span class="linenos">143</span></a>    <span class="k">def</span> <span class="nf">__html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ast</span><span class="p">:</span> <span class="n">AST</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Compiler-144"><a href="#Compiler-144"><span class="linenos">144</span></a>        <span class="n">html</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">ast</span><span class="p">)</span>
</span><span id="Compiler-145"><a href="#Compiler-145"><span class="linenos">145</span></a>
</span><span id="Compiler-146"><a href="#Compiler-146"><span class="linenos">146</span></a>        <span class="c1"># 1. Search for all python elements and get source info.</span>
</span><span id="Compiler-147"><a href="#Compiler-147"><span class="linenos">147</span></a>        <span class="c1">#    - Remove when done</span>
</span><span id="Compiler-148"><a href="#Compiler-148"><span class="linenos">148</span></a>        <span class="n">vp</span> <span class="o">=</span> <span class="n">VirtualPython</span><span class="p">()</span>
</span><span id="Compiler-149"><a href="#Compiler-149"><span class="linenos">149</span></a>
</span><span id="Compiler-150"><a href="#Compiler-150"><span class="linenos">150</span></a>        <span class="k">for</span> <span class="n">pb</span> <span class="ow">in</span> <span class="n">find_all</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">}):</span>
</span><span id="Compiler-151"><a href="#Compiler-151"><span class="linenos">151</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pb</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Compiler-152"><a href="#Compiler-152"><span class="linenos">152</span></a>                <span class="k">if</span> <span class="n">pb</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span>
</span><span id="Compiler-153"><a href="#Compiler-153"><span class="linenos">153</span></a>                    <span class="n">vp</span> <span class="o">+=</span> <span class="n">VirtualPython</span><span class="p">(</span><span class="n">pb</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="Compiler-154"><a href="#Compiler-154"><span class="linenos">154</span></a>
</span><span id="Compiler-155"><a href="#Compiler-155"><span class="linenos">155</span></a>        <span class="n">remove_nodes</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;element&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">}])</span>
</span><span id="Compiler-156"><a href="#Compiler-156"><span class="linenos">156</span></a>
</span><span id="Compiler-157"><a href="#Compiler-157"><span class="linenos">157</span></a>        <span class="c1"># 2. Replace specific element node with given replacement components</span>
</span><span id="Compiler-158"><a href="#Compiler-158"><span class="linenos">158</span></a>        <span class="n">replace_components</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Compiler-159"><a href="#Compiler-159"><span class="linenos">159</span></a>
</span><span id="Compiler-160"><a href="#Compiler-160"><span class="linenos">160</span></a>        <span class="k">for</span> <span class="n">pb</span> <span class="ow">in</span> <span class="n">find_all</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">}):</span>
</span><span id="Compiler-161"><a href="#Compiler-161"><span class="linenos">161</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pb</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Compiler-162"><a href="#Compiler-162"><span class="linenos">162</span></a>                <span class="k">if</span> <span class="n">pb</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span>
</span><span id="Compiler-163"><a href="#Compiler-163"><span class="linenos">163</span></a>                    <span class="n">vp</span> <span class="o">+=</span> <span class="n">VirtualPython</span><span class="p">(</span><span class="n">pb</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span id="Compiler-164"><a href="#Compiler-164"><span class="linenos">164</span></a>
</span><span id="Compiler-165"><a href="#Compiler-165"><span class="linenos">165</span></a>        <span class="n">remove_nodes</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;element&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">}])</span>
</span><span id="Compiler-166"><a href="#Compiler-166"><span class="linenos">166</span></a>        <span class="c1"># from phml.utils import inspect</span>
</span><span id="Compiler-167"><a href="#Compiler-167"><span class="linenos">167</span></a>        <span class="c1"># input(inspect(html))</span>
</span><span id="Compiler-168"><a href="#Compiler-168"><span class="linenos">168</span></a>        <span class="c1"># 3. Search each element and find py-if, py-elif, py-else, and py-for</span>
</span><span id="Compiler-169"><a href="#Compiler-169"><span class="linenos">169</span></a>        <span class="c1">#    - Execute those statements</span>
</span><span id="Compiler-170"><a href="#Compiler-170"><span class="linenos">170</span></a>
</span><span id="Compiler-171"><a href="#Compiler-171"><span class="linenos">171</span></a>        <span class="n">apply_conditions</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Compiler-172"><a href="#Compiler-172"><span class="linenos">172</span></a>        <span class="c1"># from phml.utils import inspect</span>
</span><span id="Compiler-173"><a href="#Compiler-173"><span class="linenos">173</span></a>        <span class="c1"># input(inspect(html))</span>
</span><span id="Compiler-174"><a href="#Compiler-174"><span class="linenos">174</span></a>
</span><span id="Compiler-175"><a href="#Compiler-175"><span class="linenos">175</span></a>        <span class="c1"># 4. Search for python blocks and process them.</span>
</span><span id="Compiler-176"><a href="#Compiler-176"><span class="linenos">176</span></a>
</span><span id="Compiler-177"><a href="#Compiler-177"><span class="linenos">177</span></a>        <span class="n">apply_python</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">vp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Compiler-178"><a href="#Compiler-178"><span class="linenos">178</span></a>
</span><span id="Compiler-179"><a href="#Compiler-179"><span class="linenos">179</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__to_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span>
</span><span id="Compiler-180"><a href="#Compiler-180"><span class="linenos">180</span></a>
</span><span id="Compiler-181"><a href="#Compiler-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">__json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ast</span><span class="p">:</span> <span class="n">AST</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Compiler-182"><a href="#Compiler-182"><span class="linenos">182</span></a>        <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">dumps</span>
</span><span id="Compiler-183"><a href="#Compiler-183"><span class="linenos">183</span></a>
</span><span id="Compiler-184"><a href="#Compiler-184"><span class="linenos">184</span></a>        <span class="k">def</span> <span class="nf">compile_children</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Root</span> <span class="o">|</span> <span class="n">Element</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="Compiler-185"><a href="#Compiler-185"><span class="linenos">185</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span><span class="p">}</span>
</span><span id="Compiler-186"><a href="#Compiler-186"><span class="linenos">186</span></a>
</span><span id="Compiler-187"><a href="#Compiler-187"><span class="linenos">187</span></a>            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;root&quot;</span><span class="p">:</span>
</span><span id="Compiler-188"><a href="#Compiler-188"><span class="linenos">188</span></a>                <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Compiler-189"><a href="#Compiler-189"><span class="linenos">189</span></a>                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Root nodes must only occur as the root of an ast/tree.&quot;</span><span class="p">)</span>
</span><span id="Compiler-190"><a href="#Compiler-190"><span class="linenos">190</span></a>
</span><span id="Compiler-191"><a href="#Compiler-191"><span class="linenos">191</span></a>            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
</span><span id="Compiler-192"><a href="#Compiler-192"><span class="linenos">192</span></a>                <span class="k">if</span> <span class="n">attr</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">]:</span>
</span><span id="Compiler-193"><a href="#Compiler-193"><span class="linenos">193</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
</span><span id="Compiler-194"><a href="#Compiler-194"><span class="linenos">194</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Position</span><span class="p">):</span>
</span><span id="Compiler-195"><a href="#Compiler-195"><span class="linenos">195</span></a>                        <span class="n">data</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">as_dict</span><span class="p">()</span>
</span><span id="Compiler-196"><a href="#Compiler-196"><span class="linenos">196</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-197"><a href="#Compiler-197"><span class="linenos">197</span></a>                        <span class="n">data</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Compiler-198"><a href="#Compiler-198"><span class="linenos">198</span></a>
</span><span id="Compiler-199"><a href="#Compiler-199"><span class="linenos">199</span></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">):</span>
</span><span id="Compiler-200"><a href="#Compiler-200"><span class="linenos">200</span></a>                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Compiler-201"><a href="#Compiler-201"><span class="linenos">201</span></a>                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">visit_children</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
</span><span id="Compiler-202"><a href="#Compiler-202"><span class="linenos">202</span></a>                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">compile_children</span><span class="p">(</span><span class="n">child</span><span class="p">))</span>
</span><span id="Compiler-203"><a href="#Compiler-203"><span class="linenos">203</span></a>
</span><span id="Compiler-204"><a href="#Compiler-204"><span class="linenos">204</span></a>            <span class="k">return</span> <span class="n">data</span>
</span><span id="Compiler-205"><a href="#Compiler-205"><span class="linenos">205</span></a>
</span><span id="Compiler-206"><a href="#Compiler-206"><span class="linenos">206</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">compile_children</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span>
</span><span id="Compiler-207"><a href="#Compiler-207"><span class="linenos">207</span></a>        <span class="k">return</span> <span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">)</span>
</span><span id="Compiler-208"><a href="#Compiler-208"><span class="linenos">208</span></a>
</span><span id="Compiler-209"><a href="#Compiler-209"><span class="linenos">209</span></a>    <span class="k">def</span> <span class="nf">__markdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ast</span><span class="p">:</span> <span class="n">AST</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Compiler-210"><a href="#Compiler-210"><span class="linenos">210</span></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;Markdown is not supported.&quot;</span><span class="p">)</span>
</span><span id="Compiler-211"><a href="#Compiler-211"><span class="linenos">211</span></a>
</span><span id="Compiler-212"><a href="#Compiler-212"><span class="linenos">212</span></a>    <span class="k">def</span> <span class="nf">__to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ast</span><span class="p">:</span> <span class="n">AST</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Compiler-213"><a href="#Compiler-213"><span class="linenos">213</span></a>        <span class="k">def</span> <span class="nf">compile_children</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">All_Nodes</span><span class="p">,</span> <span class="n">indent</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Compiler-214"><a href="#Compiler-214"><span class="linenos">214</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Compiler-215"><a href="#Compiler-215"><span class="linenos">215</span></a>            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span>
</span><span id="Compiler-216"><a href="#Compiler-216"><span class="linenos">216</span></a>                <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">startend</span><span class="p">:</span>
</span><span id="Compiler-217"><a href="#Compiler-217"><span class="linenos">217</span></a>                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">node</span><span class="o">.</span><span class="n">start_tag</span><span class="p">())</span>
</span><span id="Compiler-218"><a href="#Compiler-218"><span class="linenos">218</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-219"><a href="#Compiler-219"><span class="linenos">219</span></a>                    <span class="k">if</span> <span class="p">(</span>
</span><span id="Compiler-220"><a href="#Compiler-220"><span class="linenos">220</span></a>                        <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="Compiler-221"><a href="#Compiler-221"><span class="linenos">221</span></a>                        <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;text&quot;</span>
</span><span id="Compiler-222"><a href="#Compiler-222"><span class="linenos">222</span></a>                        <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">num_lines</span> <span class="o">==</span> <span class="mi">1</span>
</span><span id="Compiler-223"><a href="#Compiler-223"><span class="linenos">223</span></a>                    <span class="p">):</span>
</span><span id="Compiler-224"><a href="#Compiler-224"><span class="linenos">224</span></a>                        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Compiler-225"><a href="#Compiler-225"><span class="linenos">225</span></a>                        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">node</span><span class="o">.</span><span class="n">start_tag</span><span class="p">())</span>
</span><span id="Compiler-226"><a href="#Compiler-226"><span class="linenos">226</span></a>                        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Compiler-227"><a href="#Compiler-227"><span class="linenos">227</span></a>                            <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span>
</span><span id="Compiler-228"><a href="#Compiler-228"><span class="linenos">228</span></a>                                <span class="n">indent</span> <span class="o">+</span> <span class="n">offset</span> <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">num_lines</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="Compiler-229"><a href="#Compiler-229"><span class="linenos">229</span></a>                            <span class="p">)</span>
</span><span id="Compiler-230"><a href="#Compiler-230"><span class="linenos">230</span></a>                        <span class="p">)</span>
</span><span id="Compiler-231"><a href="#Compiler-231"><span class="linenos">231</span></a>                        <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">end_tag</span><span class="p">())</span>
</span><span id="Compiler-232"><a href="#Compiler-232"><span class="linenos">232</span></a>                        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">out</span><span class="p">))</span>
</span><span id="Compiler-233"><a href="#Compiler-233"><span class="linenos">233</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-234"><a href="#Compiler-234"><span class="linenos">234</span></a>                        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">node</span><span class="o">.</span><span class="n">start_tag</span><span class="p">())</span>
</span><span id="Compiler-235"><a href="#Compiler-235"><span class="linenos">235</span></a>                        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">visit_children</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
</span><span id="Compiler-236"><a href="#Compiler-236"><span class="linenos">236</span></a>                            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;element&quot;</span><span class="p">:</span>
</span><span id="Compiler-237"><a href="#Compiler-237"><span class="linenos">237</span></a>                                <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">compile_children</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">offset</span><span class="p">))</span>
</span><span id="Compiler-238"><a href="#Compiler-238"><span class="linenos">238</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-239"><a href="#Compiler-239"><span class="linenos">239</span></a>                                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">indent</span> <span class="o">+</span> <span class="n">offset</span><span class="p">))</span>
</span><span id="Compiler-240"><a href="#Compiler-240"><span class="linenos">240</span></a>                        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">*</span> <span class="n">indent</span> <span class="o">+</span> <span class="n">node</span><span class="o">.</span><span class="n">end_tag</span><span class="p">())</span>
</span><span id="Compiler-241"><a href="#Compiler-241"><span class="linenos">241</span></a>            <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;root&quot;</span><span class="p">:</span>
</span><span id="Compiler-242"><a href="#Compiler-242"><span class="linenos">242</span></a>                <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">visit_children</span><span class="p">(</span><span class="n">node</span><span class="p">):</span>
</span><span id="Compiler-243"><a href="#Compiler-243"><span class="linenos">243</span></a>                    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">compile_children</span><span class="p">(</span><span class="n">child</span><span class="p">))</span>
</span><span id="Compiler-244"><a href="#Compiler-244"><span class="linenos">244</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler-245"><a href="#Compiler-245"><span class="linenos">245</span></a>                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">stringify</span><span class="p">(</span><span class="n">indent</span> <span class="o">+</span> <span class="n">offset</span><span class="p">))</span>
</span><span id="Compiler-246"><a href="#Compiler-246"><span class="linenos">246</span></a>            <span class="k">return</span> <span class="n">data</span>
</span><span id="Compiler-247"><a href="#Compiler-247"><span class="linenos">247</span></a>
</span><span id="Compiler-248"><a href="#Compiler-248"><span class="linenos">248</span></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">compile_children</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span>
</span><span id="Compiler-249"><a href="#Compiler-249"><span class="linenos">249</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Used to compile phml into other formats. HTML, PHML,
JSON, Markdown, etc...</p>
</div>


                            <div id="Compiler.__init__" class="classattr">
                                        <input id="Compiler.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Compiler</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">ast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#AST">phml.AST</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">components</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">Root</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Element</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">comment</span><span class="o">.</span><span class="n">Comment</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">DocType</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Parent</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">Node</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">literal</span><span class="o">.</span><span class="n">Literal</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Compiler.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Compiler.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Compiler.__init__-36"><a href="#Compiler.__init__-36"><span class="linenos">36</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Compiler.__init__-37"><a href="#Compiler.__init__-37"><span class="linenos">37</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Compiler.__init__-38"><a href="#Compiler.__init__-38"><span class="linenos">38</span></a>        <span class="n">ast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AST</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler.__init__-39"><a href="#Compiler.__init__-39"><span class="linenos">39</span></a>        <span class="n">components</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler.__init__-40"><a href="#Compiler.__init__-40"><span class="linenos">40</span></a>    <span class="p">):</span>
</span><span id="Compiler.__init__-41"><a href="#Compiler.__init__-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">ast</span>
</span><span id="Compiler.__init__-42"><a href="#Compiler.__init__-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">components</span> <span class="o">=</span> <span class="n">components</span> <span class="ow">or</span> <span class="p">{}</span>
</span></pre></div>


    

                            </div>
                            <div id="Compiler.ast" class="classattr">
                                <div class="attr variable">
            <span class="name">ast</span><span class="annotation">: <a href="#AST">phml.AST</a></span>

        
    </div>
    <a class="headerlink" href="#Compiler.ast"></a>
    
            <div class="docstring"><p>phml ast used by the compiler to generate a new format.</p>
</div>


                            </div>
                            <div id="Compiler.add" class="classattr">
                                        <input id="Compiler.add-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">Root</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Element</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">comment</span><span class="o">.</span><span class="n">Comment</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">DocType</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Parent</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">Node</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">literal</span><span class="o">.</span><span class="n">Literal</span><span class="p">]</span> <span class="o">|</span> <span class="n"><a href="#AST">phml.AST</a></span><span class="p">]</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">Root</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Element</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">comment</span><span class="o">.</span><span class="n">Comment</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">DocType</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Parent</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">Node</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">literal</span><span class="o">.</span><span class="n">Literal</span><span class="p">]</span> <span class="o">|</span> <span class="n"><a href="#AST">phml.AST</a></span><span class="p">]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Compiler.add-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Compiler.add"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Compiler.add-44"><a href="#Compiler.add-44"><span class="linenos">44</span></a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
</span><span id="Compiler.add-45"><a href="#Compiler.add-45"><span class="linenos">45</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Compiler.add-46"><a href="#Compiler.add-46"><span class="linenos">46</span></a>        <span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]</span> <span class="o">|</span> <span class="n">AST</span><span class="p">]</span>
</span><span id="Compiler.add-47"><a href="#Compiler.add-47"><span class="linenos">47</span></a>        <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">]</span> <span class="o">|</span> <span class="n">AST</span><span class="p">],</span>
</span><span id="Compiler.add-48"><a href="#Compiler.add-48"><span class="linenos">48</span></a>    <span class="p">):</span>
</span><span id="Compiler.add-49"><a href="#Compiler.add-49"><span class="linenos">49</span></a>        <span class="sd">&quot;&quot;&quot;Add a component to the compilers component list.</span>
</span><span id="Compiler.add-50"><a href="#Compiler.add-50"><span class="linenos">50</span></a>
</span><span id="Compiler.add-51"><a href="#Compiler.add-51"><span class="linenos">51</span></a><span class="sd">        Components passed in can be of a few types. It can also be a dictionary of str</span>
</span><span id="Compiler.add-52"><a href="#Compiler.add-52"><span class="linenos">52</span></a><span class="sd">        being the name of the element to be replaced. The name can be snake case, camel</span>
</span><span id="Compiler.add-53"><a href="#Compiler.add-53"><span class="linenos">53</span></a><span class="sd">        case, or pascal cased. The value can either be the parsed result of the component</span>
</span><span id="Compiler.add-54"><a href="#Compiler.add-54"><span class="linenos">54</span></a><span class="sd">        from phml.utils.parse_component() or the parsed ast of the component. Lastely,</span>
</span><span id="Compiler.add-55"><a href="#Compiler.add-55"><span class="linenos">55</span></a><span class="sd">        the component can be a tuple. The first value is the name of the element to be</span>
</span><span id="Compiler.add-56"><a href="#Compiler.add-56"><span class="linenos">56</span></a><span class="sd">        replaced; with the second value being either the parsed result of the component</span>
</span><span id="Compiler.add-57"><a href="#Compiler.add-57"><span class="linenos">57</span></a><span class="sd">        or the component&#39;s ast.</span>
</span><span id="Compiler.add-58"><a href="#Compiler.add-58"><span class="linenos">58</span></a>
</span><span id="Compiler.add-59"><a href="#Compiler.add-59"><span class="linenos">59</span></a><span class="sd">        Note:</span>
</span><span id="Compiler.add-60"><a href="#Compiler.add-60"><span class="linenos">60</span></a><span class="sd">            Any duplicate components will be replaced.</span>
</span><span id="Compiler.add-61"><a href="#Compiler.add-61"><span class="linenos">61</span></a>
</span><span id="Compiler.add-62"><a href="#Compiler.add-62"><span class="linenos">62</span></a><span class="sd">        Args:</span>
</span><span id="Compiler.add-63"><a href="#Compiler.add-63"><span class="linenos">63</span></a><span class="sd">            components: Any number values indicating</span>
</span><span id="Compiler.add-64"><a href="#Compiler.add-64"><span class="linenos">64</span></a><span class="sd">            name of the component and the the component. The name is used</span>
</span><span id="Compiler.add-65"><a href="#Compiler.add-65"><span class="linenos">65</span></a><span class="sd">            to replace a element with the tag==name.</span>
</span><span id="Compiler.add-66"><a href="#Compiler.add-66"><span class="linenos">66</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Compiler.add-67"><a href="#Compiler.add-67"><span class="linenos">67</span></a>
</span><span id="Compiler.add-68"><a href="#Compiler.add-68"><span class="linenos">68</span></a>        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
</span><span id="Compiler.add-69"><a href="#Compiler.add-69"><span class="linenos">69</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Compiler.add-70"><a href="#Compiler.add-70"><span class="linenos">70</span></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="Compiler.add-71"><a href="#Compiler.add-71"><span class="linenos">71</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">AST</span><span class="p">):</span>
</span><span id="Compiler.add-72"><a href="#Compiler.add-72"><span class="linenos">72</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">parse_component</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="Compiler.add-73"><a href="#Compiler.add-73"><span class="linenos">73</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler.add-74"><a href="#Compiler.add-74"><span class="linenos">74</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Compiler.add-75"><a href="#Compiler.add-75"><span class="linenos">75</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
</span><span id="Compiler.add-76"><a href="#Compiler.add-76"><span class="linenos">76</span></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">AST</span><span class="p">):</span>
</span><span id="Compiler.add-77"><a href="#Compiler.add-77"><span class="linenos">77</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">parse_component</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="Compiler.add-78"><a href="#Compiler.add-78"><span class="linenos">78</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler.add-79"><a href="#Compiler.add-79"><span class="linenos">79</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">[</span><span class="n">tag_from_file</span><span class="p">(</span><span class="n">component</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span> <span class="o">=</span> <span class="n">component</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Compiler.add-80"><a href="#Compiler.add-80"><span class="linenos">80</span></a>
</span><span id="Compiler.add-81"><a href="#Compiler.add-81"><span class="linenos">81</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Add a component to the compilers component list.</p>

<p>Components passed in can be of a few types. It can also be a dictionary of str
being the name of the element to be replaced. The name can be snake case, camel
case, or pascal cased. The value can either be the parsed result of the component
from phml.utils.parse_component() or the parsed ast of the component. Lastely,
the component can be a tuple. The first value is the name of the element to be
replaced; with the second value being either the parsed result of the component
or the component's ast.</p>

<h6 id="note">Note</h6>

<blockquote>
  <p>Any duplicate components will be replaced.</p>
</blockquote>

<h6 id="args">Args</h6>

<ul>
<li><strong>components:</strong>  Any number values indicating</li>
<li>name of the component and the the component. The name is used</li>
<li>to replace a element with the tag==name.</li>
</ul>
</div>


                            </div>
                            <div id="Compiler.remove" class="classattr">
                                        <input id="Compiler.remove-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">Root</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">Element</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">Text</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">comment</span><span class="o">.</span><span class="n">Comment</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">doctype</span><span class="o">.</span><span class="n">DocType</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Parent</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">Node</span> <span class="o">|</span> <span class="n">phml</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">literal</span><span class="o">.</span><span class="n">Literal</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Compiler.remove-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Compiler.remove"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Compiler.remove-83"><a href="#Compiler.remove-83"><span class="linenos"> 83</span></a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">components</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">All_Nodes</span><span class="p">):</span>
</span><span id="Compiler.remove-84"><a href="#Compiler.remove-84"><span class="linenos"> 84</span></a>        <span class="sd">&quot;&quot;&quot;Takes either component names or components and removes them</span>
</span><span id="Compiler.remove-85"><a href="#Compiler.remove-85"><span class="linenos"> 85</span></a><span class="sd">        from the dictionary.</span>
</span><span id="Compiler.remove-86"><a href="#Compiler.remove-86"><span class="linenos"> 86</span></a>
</span><span id="Compiler.remove-87"><a href="#Compiler.remove-87"><span class="linenos"> 87</span></a><span class="sd">        Args:</span>
</span><span id="Compiler.remove-88"><a href="#Compiler.remove-88"><span class="linenos"> 88</span></a><span class="sd">            components (str | All_Nodes): Any str name of components or</span>
</span><span id="Compiler.remove-89"><a href="#Compiler.remove-89"><span class="linenos"> 89</span></a><span class="sd">            node value to remove from the components list in the compiler.</span>
</span><span id="Compiler.remove-90"><a href="#Compiler.remove-90"><span class="linenos"> 90</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Compiler.remove-91"><a href="#Compiler.remove-91"><span class="linenos"> 91</span></a>        <span class="k">for</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">components</span><span class="p">:</span>
</span><span id="Compiler.remove-92"><a href="#Compiler.remove-92"><span class="linenos"> 92</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Compiler.remove-93"><a href="#Compiler.remove-93"><span class="linenos"> 93</span></a>                <span class="k">if</span> <span class="n">component</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
</span><span id="Compiler.remove-94"><a href="#Compiler.remove-94"><span class="linenos"> 94</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Compiler.remove-95"><a href="#Compiler.remove-95"><span class="linenos"> 95</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler.remove-96"><a href="#Compiler.remove-96"><span class="linenos"> 96</span></a>                    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid component name </span><span class="si">{</span><span class="n">component</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Compiler.remove-97"><a href="#Compiler.remove-97"><span class="linenos"> 97</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">All_Nodes</span><span class="p">):</span>
</span><span id="Compiler.remove-98"><a href="#Compiler.remove-98"><span class="linenos"> 98</span></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
</span><span id="Compiler.remove-99"><a href="#Compiler.remove-99"><span class="linenos"> 99</span></a>                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;component&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">component</span><span class="p">:</span>
</span><span id="Compiler.remove-100"><a href="#Compiler.remove-100"><span class="linenos">100</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Compiler.remove-101"><a href="#Compiler.remove-101"><span class="linenos">101</span></a>                        <span class="k">break</span>
</span><span id="Compiler.remove-102"><a href="#Compiler.remove-102"><span class="linenos">102</span></a>                    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">components</span><span class="p">:</span>
</span><span id="Compiler.remove-103"><a href="#Compiler.remove-103"><span class="linenos">103</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</span><span id="Compiler.remove-104"><a href="#Compiler.remove-104"><span class="linenos">104</span></a>                        <span class="k">break</span>
</span><span id="Compiler.remove-105"><a href="#Compiler.remove-105"><span class="linenos">105</span></a>
</span><span id="Compiler.remove-106"><a href="#Compiler.remove-106"><span class="linenos">106</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Takes either component names or components and removes them
from the dictionary.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>components (str | All_Nodes):</strong>  Any str name of components or</li>
<li>node value to remove from the components list in the compiler.</li>
</ul>
</div>


                            </div>
                            <div id="Compiler.compile" class="classattr">
                                        <input id="Compiler.compile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">compile</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">ast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n"><a href="#AST">phml.AST</a></span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">to_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span>,</span><span class="param">	<span class="n">indent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Compiler.compile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Compiler.compile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Compiler.compile-108"><a href="#Compiler.compile-108"><span class="linenos">108</span></a>    <span class="k">def</span> <span class="nf">compile</span><span class="p">(</span>
</span><span id="Compiler.compile-109"><a href="#Compiler.compile-109"><span class="linenos">109</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Compiler.compile-110"><a href="#Compiler.compile-110"><span class="linenos">110</span></a>        <span class="n">ast</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AST</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler.compile-111"><a href="#Compiler.compile-111"><span class="linenos">111</span></a>        <span class="n">to_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">,</span>
</span><span id="Compiler.compile-112"><a href="#Compiler.compile-112"><span class="linenos">112</span></a>        <span class="n">indent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler.compile-113"><a href="#Compiler.compile-113"><span class="linenos">113</span></a>        <span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Compiler.compile-114"><a href="#Compiler.compile-114"><span class="linenos">114</span></a>        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
</span><span id="Compiler.compile-115"><a href="#Compiler.compile-115"><span class="linenos">115</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Compiler.compile-116"><a href="#Compiler.compile-116"><span class="linenos">116</span></a>        <span class="sd">&quot;&quot;&quot;Execute compilation to a different format.&quot;&quot;&quot;</span>
</span><span id="Compiler.compile-117"><a href="#Compiler.compile-117"><span class="linenos">117</span></a>
</span><span id="Compiler.compile-118"><a href="#Compiler.compile-118"><span class="linenos">118</span></a>        <span class="n">ast</span> <span class="o">=</span> <span class="n">ast</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">ast</span>
</span><span id="Compiler.compile-119"><a href="#Compiler.compile-119"><span class="linenos">119</span></a>
</span><span id="Compiler.compile-120"><a href="#Compiler.compile-120"><span class="linenos">120</span></a>        <span class="k">if</span> <span class="n">ast</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Compiler.compile-121"><a href="#Compiler.compile-121"><span class="linenos">121</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Must provide an ast to compile.&quot;</span><span class="p">)</span>
</span><span id="Compiler.compile-122"><a href="#Compiler.compile-122"><span class="linenos">122</span></a>
</span><span id="Compiler.compile-123"><a href="#Compiler.compile-123"><span class="linenos">123</span></a>        <span class="n">doctypes</span> <span class="o">=</span> <span class="p">[</span><span class="n">dt</span> <span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="n">visit_children</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span> <span class="k">if</span> <span class="n">test</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="s2">&quot;doctype&quot;</span><span class="p">)]</span>
</span><span id="Compiler.compile-124"><a href="#Compiler.compile-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">doctypes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Compiler.compile-125"><a href="#Compiler.compile-125"><span class="linenos">125</span></a>            <span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">DocType</span><span class="p">(</span><span class="n">ast</span><span class="o">.</span><span class="n">tree</span><span class="p">))</span>
</span><span id="Compiler.compile-126"><a href="#Compiler.compile-126"><span class="linenos">126</span></a>
</span><span id="Compiler.compile-127"><a href="#Compiler.compile-127"><span class="linenos">127</span></a>        <span class="k">if</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">PHML</span><span class="p">:</span>
</span><span id="Compiler.compile-128"><a href="#Compiler.compile-128"><span class="linenos">128</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__phml</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span> <span class="ow">or</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="Compiler.compile-129"><a href="#Compiler.compile-129"><span class="linenos">129</span></a>        <span class="k">elif</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">HTML</span><span class="p">:</span>
</span><span id="Compiler.compile-130"><a href="#Compiler.compile-130"><span class="linenos">130</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__html</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span> <span class="ow">or</span> <span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Compiler.compile-131"><a href="#Compiler.compile-131"><span class="linenos">131</span></a>        <span class="k">elif</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">JSON</span><span class="p">:</span>
</span><span id="Compiler.compile-132"><a href="#Compiler.compile-132"><span class="linenos">132</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__json</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span> <span class="ow">or</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="Compiler.compile-133"><a href="#Compiler.compile-133"><span class="linenos">133</span></a>        <span class="k">elif</span> <span class="n">to_format</span> <span class="o">==</span> <span class="n">Markdown</span><span class="p">:</span>
</span><span id="Compiler.compile-134"><a href="#Compiler.compile-134"><span class="linenos">134</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__markdown</span><span class="p">(</span><span class="n">ast</span><span class="p">)</span>
</span><span id="Compiler.compile-135"><a href="#Compiler.compile-135"><span class="linenos">135</span></a>        <span class="k">elif</span> <span class="n">handler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Compiler.compile-136"><a href="#Compiler.compile-136"><span class="linenos">136</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unkown format &lt; </span><span class="si">{</span> <span class="n">to_format</span> <span class="si">}</span><span class="s2"> &gt;&quot;</span><span class="p">)</span>
</span><span id="Compiler.compile-137"><a href="#Compiler.compile-137"><span class="linenos">137</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Compiler.compile-138"><a href="#Compiler.compile-138"><span class="linenos">138</span></a>            <span class="k">return</span> <span class="n">handler</span><span class="p">(</span><span class="n">ast</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Execute compilation to a different format.</p>
</div>


                            </div>
                </section>
                <section id="Parser">
                            <input id="Parser-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Parser</span>:

                <label class="view-source-button" for="Parser-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser-249"><a href="#Parser-249"><span class="linenos">249</span></a><span class="k">class</span> <span class="nc">Parser</span><span class="p">:</span>
</span><span id="Parser-250"><a href="#Parser-250"><span class="linenos">250</span></a>    <span class="sd">&quot;&quot;&quot;Primary logic to handle everything with a phml file.</span>
</span><span id="Parser-251"><a href="#Parser-251"><span class="linenos">251</span></a>
</span><span id="Parser-252"><a href="#Parser-252"><span class="linenos">252</span></a><span class="sd">    This class can parse files as phml files and create an ast.</span>
</span><span id="Parser-253"><a href="#Parser-253"><span class="linenos">253</span></a><span class="sd">    The ast and the nodes themselfs can translate themselves to;</span>
</span><span id="Parser-254"><a href="#Parser-254"><span class="linenos">254</span></a><span class="sd">    html, phml, and json. The ast can recursively return itself as</span>
</span><span id="Parser-255"><a href="#Parser-255"><span class="linenos">255</span></a><span class="sd">    an html string. However, only this class can process the python</span>
</span><span id="Parser-256"><a href="#Parser-256"><span class="linenos">256</span></a><span class="sd">    blocks inside of the phml file.</span>
</span><span id="Parser-257"><a href="#Parser-257"><span class="linenos">257</span></a>
</span><span id="Parser-258"><a href="#Parser-258"><span class="linenos">258</span></a><span class="sd">    Call Parser.convert() and pass any kwargs you wish to be exposed to</span>
</span><span id="Parser-259"><a href="#Parser-259"><span class="linenos">259</span></a><span class="sd">    the process that processes the python. You may also use Parser.util to</span>
</span><span id="Parser-260"><a href="#Parser-260"><span class="linenos">260</span></a><span class="sd">    pass extensions to convert and manipulate the html along with the python</span>
</span><span id="Parser-261"><a href="#Parser-261"><span class="linenos">261</span></a><span class="sd">    processing.</span>
</span><span id="Parser-262"><a href="#Parser-262"><span class="linenos">262</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Parser-263"><a href="#Parser-263"><span class="linenos">263</span></a>
</span><span id="Parser-264"><a href="#Parser-264"><span class="linenos">264</span></a>    <span class="n">parser</span><span class="p">:</span> <span class="n">PHMLParser</span>
</span><span id="Parser-265"><a href="#Parser-265"><span class="linenos">265</span></a>    <span class="sd">&quot;&quot;&quot;The custom builtin `html.parser` class that builds phml ast.&quot;&quot;&quot;</span>
</span><span id="Parser-266"><a href="#Parser-266"><span class="linenos">266</span></a>
</span><span id="Parser-267"><a href="#Parser-267"><span class="linenos">267</span></a>    <span class="n">ast</span><span class="p">:</span> <span class="n">AST</span>
</span><span id="Parser-268"><a href="#Parser-268"><span class="linenos">268</span></a>    <span class="sd">&quot;&quot;&quot;The recursive node tree of the phml ast.&quot;&quot;&quot;</span>
</span><span id="Parser-269"><a href="#Parser-269"><span class="linenos">269</span></a>
</span><span id="Parser-270"><a href="#Parser-270"><span class="linenos">270</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parser-271"><a href="#Parser-271"><span class="linenos">271</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span> <span class="o">=</span> <span class="n">PHMLParser</span><span class="p">()</span>
</span><span id="Parser-272"><a href="#Parser-272"><span class="linenos">272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Parser-273"><a href="#Parser-273"><span class="linenos">273</span></a>
</span><span id="Parser-274"><a href="#Parser-274"><span class="linenos">274</span></a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Parser-275"><a href="#Parser-275"><span class="linenos">275</span></a>        <span class="sd">&quot;&quot;&quot;Parse a given phml file to AST following hast and unist.</span>
</span><span id="Parser-276"><a href="#Parser-276"><span class="linenos">276</span></a>
</span><span id="Parser-277"><a href="#Parser-277"><span class="linenos">277</span></a><span class="sd">        When finished the PHML.ast variable will be populated with the</span>
</span><span id="Parser-278"><a href="#Parser-278"><span class="linenos">278</span></a><span class="sd">        resulting ast.</span>
</span><span id="Parser-279"><a href="#Parser-279"><span class="linenos">279</span></a>
</span><span id="Parser-280"><a href="#Parser-280"><span class="linenos">280</span></a><span class="sd">        Args:</span>
</span><span id="Parser-281"><a href="#Parser-281"><span class="linenos">281</span></a><span class="sd">            path (str | Path): The path to the file that should be parsed.</span>
</span><span id="Parser-282"><a href="#Parser-282"><span class="linenos">282</span></a><span class="sd">            handler (Callable | None): A function to call instead of the built in</span>
</span><span id="Parser-283"><a href="#Parser-283"><span class="linenos">283</span></a><span class="sd">            parser to parse to a phml.AST. Must take a string and return a phml.AST.</span>
</span><span id="Parser-284"><a href="#Parser-284"><span class="linenos">284</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser-285"><a href="#Parser-285"><span class="linenos">285</span></a>
</span><span id="Parser-286"><a href="#Parser-286"><span class="linenos">286</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">source</span><span class="p">:</span>
</span><span id="Parser-287"><a href="#Parser-287"><span class="linenos">287</span></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="Parser-288"><a href="#Parser-288"><span class="linenos">288</span></a>
</span><span id="Parser-289"><a href="#Parser-289"><span class="linenos">289</span></a>        <span class="k">if</span> <span class="n">handler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser-290"><a href="#Parser-290"><span class="linenos">290</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Parser-291"><a href="#Parser-291"><span class="linenos">291</span></a>
</span><span id="Parser-292"><a href="#Parser-292"><span class="linenos">292</span></a>            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;.json&quot;</span><span class="p">:</span>
</span><span id="Parser-293"><a href="#Parser-293"><span class="linenos">293</span></a>                <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">loads</span>
</span><span id="Parser-294"><a href="#Parser-294"><span class="linenos">294</span></a>
</span><span id="Parser-295"><a href="#Parser-295"><span class="linenos">295</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="n">json_to_ast</span><span class="p">(</span><span class="n">loads</span><span class="p">(</span><span class="n">src</span><span class="p">)))</span>
</span><span id="Parser-296"><a href="#Parser-296"><span class="linenos">296</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Parser-297"><a href="#Parser-297"><span class="linenos">297</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="Parser-298"><a href="#Parser-298"><span class="linenos">298</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="n">Root</span><span class="p">()</span>
</span><span id="Parser-299"><a href="#Parser-299"><span class="linenos">299</span></a>
</span><span id="Parser-300"><a href="#Parser-300"><span class="linenos">300</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</span><span id="Parser-301"><a href="#Parser-301"><span class="linenos">301</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span><span class="p">)</span>
</span><span id="Parser-302"><a href="#Parser-302"><span class="linenos">302</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parser-303"><a href="#Parser-303"><span class="linenos">303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</span><span id="Parser-304"><a href="#Parser-304"><span class="linenos">304</span></a>
</span><span id="Parser-305"><a href="#Parser-305"><span class="linenos">305</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="Parser-306"><a href="#Parser-306"><span class="linenos">306</span></a>
</span><span id="Parser-307"><a href="#Parser-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Parser-308"><a href="#Parser-308"><span class="linenos">308</span></a>        <span class="sd">&quot;&quot;&quot;Parse data from a phml/html string or from a dict to a phml ast.</span>
</span><span id="Parser-309"><a href="#Parser-309"><span class="linenos">309</span></a>
</span><span id="Parser-310"><a href="#Parser-310"><span class="linenos">310</span></a><span class="sd">        Args:</span>
</span><span id="Parser-311"><a href="#Parser-311"><span class="linenos">311</span></a><span class="sd">            data (str | dict): Data to parse in to a ast</span>
</span><span id="Parser-312"><a href="#Parser-312"><span class="linenos">312</span></a><span class="sd">            data_type (str): Can be `HTML`, `PHML`, `MARKDOWN`, or `JSON` which</span>
</span><span id="Parser-313"><a href="#Parser-313"><span class="linenos">313</span></a><span class="sd">            tells parser how to parse the data. Otherwise it will assume</span>
</span><span id="Parser-314"><a href="#Parser-314"><span class="linenos">314</span></a><span class="sd">            str data to be html/phml and dict as `json`.</span>
</span><span id="Parser-315"><a href="#Parser-315"><span class="linenos">315</span></a><span class="sd">            handler (Callable | None): A function to call instead of the built in</span>
</span><span id="Parser-316"><a href="#Parser-316"><span class="linenos">316</span></a><span class="sd">            parser to parse to a phml.AST. Must take a string and return a phml.AST.</span>
</span><span id="Parser-317"><a href="#Parser-317"><span class="linenos">317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser-318"><a href="#Parser-318"><span class="linenos">318</span></a>        <span class="k">if</span> <span class="n">handler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser-319"><a href="#Parser-319"><span class="linenos">319</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Parser-320"><a href="#Parser-320"><span class="linenos">320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="n">json_to_ast</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="Parser-321"><a href="#Parser-321"><span class="linenos">321</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Parser-322"><a href="#Parser-322"><span class="linenos">322</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="Parser-323"><a href="#Parser-323"><span class="linenos">323</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="n">Root</span><span class="p">()</span>
</span><span id="Parser-324"><a href="#Parser-324"><span class="linenos">324</span></a>
</span><span id="Parser-325"><a href="#Parser-325"><span class="linenos">325</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="Parser-326"><a href="#Parser-326"><span class="linenos">326</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span><span class="p">)</span>
</span><span id="Parser-327"><a href="#Parser-327"><span class="linenos">327</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parser-328"><a href="#Parser-328"><span class="linenos">328</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="Parser-329"><a href="#Parser-329"><span class="linenos">329</span></a>
</span><span id="Parser-330"><a href="#Parser-330"><span class="linenos">330</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Primary logic to handle everything with a phml file.</p>

<p>This class can parse files as phml files and create an ast.
The ast and the nodes themselfs can translate themselves to;
html, phml, and json. The ast can recursively return itself as
an html string. However, only this class can process the python
blocks inside of the phml file.</p>

<p>Call Parser.convert() and pass any kwargs you wish to be exposed to
the process that processes the python. You may also use Parser.util to
pass extensions to convert and manipulate the html along with the python
processing.</p>
</div>


                            <div id="Parser.__init__" class="classattr">
                                        <input id="Parser.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Parser</span><span class="signature pdoc-code condensed">()</span>

                <label class="view-source-button" for="Parser.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.__init__-270"><a href="#Parser.__init__-270"><span class="linenos">270</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Parser.__init__-271"><a href="#Parser.__init__-271"><span class="linenos">271</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span> <span class="o">=</span> <span class="n">PHMLParser</span><span class="p">()</span>
</span><span id="Parser.__init__-272"><a href="#Parser.__init__-272"><span class="linenos">272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


    

                            </div>
                            <div id="Parser.parser" class="classattr">
                                <div class="attr variable">
            <span class="name">parser</span><span class="annotation">: phml.core.parser.PHMLParser</span>

        
    </div>
    <a class="headerlink" href="#Parser.parser"></a>
    
            <div class="docstring"><p>The custom builtin <code>html.parser</code> class that builds phml ast.</p>
</div>


                            </div>
                            <div id="Parser.ast" class="classattr">
                                <div class="attr variable">
            <span class="name">ast</span><span class="annotation">: <a href="#AST">phml.AST</a></span>

        
    </div>
    <a class="headerlink" href="#Parser.ast"></a>
    
            <div class="docstring"><p>The recursive node tree of the phml ast.</p>
</div>


                            </div>
                            <div id="Parser.load" class="classattr">
                                        <input id="Parser.load-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">load</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span>, </span><span class="param"><span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parser.load-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.load"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.load-274"><a href="#Parser.load-274"><span class="linenos">274</span></a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Parser.load-275"><a href="#Parser.load-275"><span class="linenos">275</span></a>        <span class="sd">&quot;&quot;&quot;Parse a given phml file to AST following hast and unist.</span>
</span><span id="Parser.load-276"><a href="#Parser.load-276"><span class="linenos">276</span></a>
</span><span id="Parser.load-277"><a href="#Parser.load-277"><span class="linenos">277</span></a><span class="sd">        When finished the PHML.ast variable will be populated with the</span>
</span><span id="Parser.load-278"><a href="#Parser.load-278"><span class="linenos">278</span></a><span class="sd">        resulting ast.</span>
</span><span id="Parser.load-279"><a href="#Parser.load-279"><span class="linenos">279</span></a>
</span><span id="Parser.load-280"><a href="#Parser.load-280"><span class="linenos">280</span></a><span class="sd">        Args:</span>
</span><span id="Parser.load-281"><a href="#Parser.load-281"><span class="linenos">281</span></a><span class="sd">            path (str | Path): The path to the file that should be parsed.</span>
</span><span id="Parser.load-282"><a href="#Parser.load-282"><span class="linenos">282</span></a><span class="sd">            handler (Callable | None): A function to call instead of the built in</span>
</span><span id="Parser.load-283"><a href="#Parser.load-283"><span class="linenos">283</span></a><span class="sd">            parser to parse to a phml.AST. Must take a string and return a phml.AST.</span>
</span><span id="Parser.load-284"><a href="#Parser.load-284"><span class="linenos">284</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser.load-285"><a href="#Parser.load-285"><span class="linenos">285</span></a>
</span><span id="Parser.load-286"><a href="#Parser.load-286"><span class="linenos">286</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">source</span><span class="p">:</span>
</span><span id="Parser.load-287"><a href="#Parser.load-287"><span class="linenos">287</span></a>            <span class="n">src</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="Parser.load-288"><a href="#Parser.load-288"><span class="linenos">288</span></a>
</span><span id="Parser.load-289"><a href="#Parser.load-289"><span class="linenos">289</span></a>        <span class="k">if</span> <span class="n">handler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser.load-290"><a href="#Parser.load-290"><span class="linenos">290</span></a>            <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Parser.load-291"><a href="#Parser.load-291"><span class="linenos">291</span></a>
</span><span id="Parser.load-292"><a href="#Parser.load-292"><span class="linenos">292</span></a>            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;.json&quot;</span><span class="p">:</span>
</span><span id="Parser.load-293"><a href="#Parser.load-293"><span class="linenos">293</span></a>                <span class="kn">from</span> <span class="nn">json</span> <span class="kn">import</span> <span class="n">loads</span>
</span><span id="Parser.load-294"><a href="#Parser.load-294"><span class="linenos">294</span></a>
</span><span id="Parser.load-295"><a href="#Parser.load-295"><span class="linenos">295</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="n">json_to_ast</span><span class="p">(</span><span class="n">loads</span><span class="p">(</span><span class="n">src</span><span class="p">)))</span>
</span><span id="Parser.load-296"><a href="#Parser.load-296"><span class="linenos">296</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Parser.load-297"><a href="#Parser.load-297"><span class="linenos">297</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="Parser.load-298"><a href="#Parser.load-298"><span class="linenos">298</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="n">Root</span><span class="p">()</span>
</span><span id="Parser.load-299"><a href="#Parser.load-299"><span class="linenos">299</span></a>
</span><span id="Parser.load-300"><a href="#Parser.load-300"><span class="linenos">300</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</span><span id="Parser.load-301"><a href="#Parser.load-301"><span class="linenos">301</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span><span class="p">)</span>
</span><span id="Parser.load-302"><a href="#Parser.load-302"><span class="linenos">302</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parser.load-303"><a href="#Parser.load-303"><span class="linenos">303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</span><span id="Parser.load-304"><a href="#Parser.load-304"><span class="linenos">304</span></a>
</span><span id="Parser.load-305"><a href="#Parser.load-305"><span class="linenos">305</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Parse a given phml file to AST following hast and unist.</p>

<p>When finished the PHML.ast variable will be populated with the
resulting ast.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>path (str | Path):</strong>  The path to the file that should be parsed.</li>
<li><strong>handler (Callable | None):</strong>  A function to call instead of the built in</li>
<li>parser to parse to a <a href="#AST">phml.AST</a>. Must take a string and return a <a href="#AST">phml.AST</a>.</li>
</ul>
</div>


                            </div>
                            <div id="Parser.parse" class="classattr">
                                        <input id="Parser.parse-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span>, </span><span class="param"><span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Parser.parse-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Parser.parse"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Parser.parse-307"><a href="#Parser.parse-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="Parser.parse-308"><a href="#Parser.parse-308"><span class="linenos">308</span></a>        <span class="sd">&quot;&quot;&quot;Parse data from a phml/html string or from a dict to a phml ast.</span>
</span><span id="Parser.parse-309"><a href="#Parser.parse-309"><span class="linenos">309</span></a>
</span><span id="Parser.parse-310"><a href="#Parser.parse-310"><span class="linenos">310</span></a><span class="sd">        Args:</span>
</span><span id="Parser.parse-311"><a href="#Parser.parse-311"><span class="linenos">311</span></a><span class="sd">            data (str | dict): Data to parse in to a ast</span>
</span><span id="Parser.parse-312"><a href="#Parser.parse-312"><span class="linenos">312</span></a><span class="sd">            data_type (str): Can be `HTML`, `PHML`, `MARKDOWN`, or `JSON` which</span>
</span><span id="Parser.parse-313"><a href="#Parser.parse-313"><span class="linenos">313</span></a><span class="sd">            tells parser how to parse the data. Otherwise it will assume</span>
</span><span id="Parser.parse-314"><a href="#Parser.parse-314"><span class="linenos">314</span></a><span class="sd">            str data to be html/phml and dict as `json`.</span>
</span><span id="Parser.parse-315"><a href="#Parser.parse-315"><span class="linenos">315</span></a><span class="sd">            handler (Callable | None): A function to call instead of the built in</span>
</span><span id="Parser.parse-316"><a href="#Parser.parse-316"><span class="linenos">316</span></a><span class="sd">            parser to parse to a phml.AST. Must take a string and return a phml.AST.</span>
</span><span id="Parser.parse-317"><a href="#Parser.parse-317"><span class="linenos">317</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Parser.parse-318"><a href="#Parser.parse-318"><span class="linenos">318</span></a>        <span class="k">if</span> <span class="n">handler</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Parser.parse-319"><a href="#Parser.parse-319"><span class="linenos">319</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Parser.parse-320"><a href="#Parser.parse-320"><span class="linenos">320</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="n">json_to_ast</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="Parser.parse-321"><a href="#Parser.parse-321"><span class="linenos">321</span></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Parser.parse-322"><a href="#Parser.parse-322"><span class="linenos">322</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="Parser.parse-323"><a href="#Parser.parse-323"><span class="linenos">323</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span> <span class="o">=</span> <span class="n">Root</span><span class="p">()</span>
</span><span id="Parser.parse-324"><a href="#Parser.parse-324"><span class="linenos">324</span></a>
</span><span id="Parser.parse-325"><a href="#Parser.parse-325"><span class="linenos">325</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="Parser.parse-326"><a href="#Parser.parse-326"><span class="linenos">326</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">AST</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phml_parser</span><span class="o">.</span><span class="n">cur</span><span class="p">)</span>
</span><span id="Parser.parse-327"><a href="#Parser.parse-327"><span class="linenos">327</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Parser.parse-328"><a href="#Parser.parse-328"><span class="linenos">328</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">ast</span> <span class="o">=</span> <span class="n">handler</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="Parser.parse-329"><a href="#Parser.parse-329"><span class="linenos">329</span></a>
</span><span id="Parser.parse-330"><a href="#Parser.parse-330"><span class="linenos">330</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Parse data from a phml/html string or from a dict to a phml ast.</p>

<h6 id="args">Args</h6>

<ul>
<li><strong>data (str | dict):</strong>  Data to parse in to a ast</li>
<li><strong>data_type (str):</strong>  Can be <code>HTML</code>, <code>PHML</code>, <code>MARKDOWN</code>, or <code>JSON</code> which</li>
<li>tells parser how to parse the data. Otherwise it will assume</li>
<li>str data to be html/phml and dict as <code>json</code>.</li>
<li><strong>handler (Callable | None):</strong>  A function to call instead of the built in</li>
<li>parser to parse to a <a href="#AST">phml.AST</a>. Must take a string and return a <a href="#AST">phml.AST</a>.</li>
</ul>
</div>


                            </div>
                </section>
                <section id="AST">
                            <input id="AST-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AST</span>:

                <label class="view-source-button" for="AST-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AST"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AST-9"><a href="#AST-9"><span class="linenos"> 9</span></a><span class="k">class</span> <span class="nc">AST</span><span class="p">:</span>
</span><span id="AST-10"><a href="#AST-10"><span class="linenos">10</span></a>    <span class="sd">&quot;&quot;&quot;PHML ast.</span>
</span><span id="AST-11"><a href="#AST-11"><span class="linenos">11</span></a>
</span><span id="AST-12"><a href="#AST-12"><span class="linenos">12</span></a><span class="sd">    Contains utility functions that can manipulate the ast.</span>
</span><span id="AST-13"><a href="#AST-13"><span class="linenos">13</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AST-14"><a href="#AST-14"><span class="linenos">14</span></a>
</span><span id="AST-15"><a href="#AST-15"><span class="linenos">15</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
</span><span id="AST-16"><a href="#AST-16"><span class="linenos">16</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">tree</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">]:</span>
</span><span id="AST-17"><a href="#AST-17"><span class="linenos">17</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">tree</span>
</span><span id="AST-18"><a href="#AST-18"><span class="linenos">18</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AST-19"><a href="#AST-19"><span class="linenos">19</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The given tree/root node for AST must be of type `Root` or `Element`&quot;</span><span class="p">)</span>
</span><span id="AST-20"><a href="#AST-20"><span class="linenos">20</span></a>
</span><span id="AST-21"><a href="#AST-21"><span class="linenos">21</span></a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">:</span>
</span><span id="AST-22"><a href="#AST-22"><span class="linenos">22</span></a>        <span class="kn">from</span> <span class="nn">phml.utils</span> <span class="kn">import</span> <span class="n">walk</span>
</span><span id="AST-23"><a href="#AST-23"><span class="linenos">23</span></a>
</span><span id="AST-24"><a href="#AST-24"><span class="linenos">24</span></a>        <span class="k">return</span> <span class="n">walk</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span>
</span><span id="AST-25"><a href="#AST-25"><span class="linenos">25</span></a>
</span><span id="AST-26"><a href="#AST-26"><span class="linenos">26</span></a>    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="AST-27"><a href="#AST-27"><span class="linenos">27</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">):</span>
</span><span id="AST-28"><a href="#AST-28"><span class="linenos">28</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">==</span> <span class="n">obj</span><span class="o">.</span><span class="n">tree</span><span class="p">:</span>
</span><span id="AST-29"><a href="#AST-29"><span class="linenos">29</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="AST-30"><a href="#AST-30"><span class="linenos">30</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="AST-31"><a href="#AST-31"><span class="linenos">31</span></a>
</span><span id="AST-32"><a href="#AST-32"><span class="linenos">32</span></a>    <span class="nd">@cached_property</span>
</span><span id="AST-33"><a href="#AST-33"><span class="linenos">33</span></a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="AST-34"><a href="#AST-34"><span class="linenos">34</span></a>        <span class="sd">&quot;&quot;&quot;Get the number of nodes in the ast tree.&quot;&quot;&quot;</span>
</span><span id="AST-35"><a href="#AST-35"><span class="linenos">35</span></a>        <span class="kn">from</span> <span class="nn">phml.utils</span> <span class="kn">import</span> <span class="n">size</span>
</span><span id="AST-36"><a href="#AST-36"><span class="linenos">36</span></a>
</span><span id="AST-37"><a href="#AST-37"><span class="linenos">37</span></a>        <span class="k">return</span> <span class="n">size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="p">)</span>
</span><span id="AST-38"><a href="#AST-38"><span class="linenos">38</span></a>
</span><span id="AST-39"><a href="#AST-39"><span class="linenos">39</span></a>    <span class="nd">@property</span>
</span><span id="AST-40"><a href="#AST-40"><span class="linenos">40</span></a>    <span class="k">def</span> <span class="nf">children</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
</span><span id="AST-41"><a href="#AST-41"><span class="linenos">41</span></a>        <span class="sd">&quot;&quot;&quot;Get access to the ast roots children.</span>
</span><span id="AST-42"><a href="#AST-42"><span class="linenos">42</span></a><span class="sd">        Is none if there is no root.</span>
</span><span id="AST-43"><a href="#AST-43"><span class="linenos">43</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AST-44"><a href="#AST-44"><span class="linenos">44</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span><span class="o">.</span><span class="n">children</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>PHML ast.</p>

<p>Contains utility functions that can manipulate the ast.</p>
</div>


                            <div id="AST.__init__" class="classattr">
                                        <input id="AST.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AST</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">tree</span></span>)</span>

                <label class="view-source-button" for="AST.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AST.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AST.__init__-15"><a href="#AST.__init__-15"><span class="linenos">15</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
</span><span id="AST.__init__-16"><a href="#AST.__init__-16"><span class="linenos">16</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">tree</span><span class="o">.</span><span class="n">type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="s2">&quot;element&quot;</span><span class="p">]:</span>
</span><span id="AST.__init__-17"><a href="#AST.__init__-17"><span class="linenos">17</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tree</span> <span class="o">=</span> <span class="n">tree</span>
</span><span id="AST.__init__-18"><a href="#AST.__init__-18"><span class="linenos">18</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AST.__init__-19"><a href="#AST.__init__-19"><span class="linenos">19</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The given tree/root node for AST must be of type `Root` or `Element`&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AST.size" class="classattr">
                                <div class="attr variable">
            <span class="name">size</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#AST.size"></a>
    
            <div class="docstring"><p>Get the number of nodes in the ast tree.</p>
</div>


                            </div>
                            <div id="AST.children" class="classattr">
                                <div class="attr variable">
            <span class="name">children</span><span class="annotation">: list</span>

        
    </div>
    <a class="headerlink" href="#AST.children"></a>
    
            <div class="docstring"><p>Get access to the ast roots children.
Is none if there is no root.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.type) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value">${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.type}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>